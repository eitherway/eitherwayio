var pupil=document.getElementById('pupil');var referencePupil=document.getElementById('pupil-reference');var getCursorXY=e=>({x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});var scalingCordsToSVG=(o,ctm)=>({x:o.x/ctm.a,y:o.y/ctm.d});var lengthOfVector=o=>(Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)));var vectorFromAtoB=(a,b)=>({x:b.x-a.x,y:b.y-a.y});function maxMoveOfPupil(o){var maxMove=45;var l=lengthOfVector(o);if(l>maxMove){o.x=(maxMove*(1/l)*o.x);o.y=(maxMove*(1/l)*o.y);}}
function mousemove(e){var cursor=getCursorXY(e);var refBoundingPupil=referencePupil.getBoundingClientRect();var xTrans=(cursor.x-(refBoundingPupil.x+(refBoundingPupil.width/2)));var yTrans=(cursor.y-(refBoundingPupil.y+(refBoundingPupil.height/2)));var ctmRefPupil=referencePupil.getScreenCTM();var svgTranslate=scalingCordsToSVG({x:xTrans,y:yTrans},ctmRefPupil);maxMoveOfPupil(svgTranslate);pupil.transform.baseVal.getItem(0).setTranslate(svgTranslate.x,svgTranslate.y);}
window.onload=init;function init(){window.onmousemove=mousemove;}